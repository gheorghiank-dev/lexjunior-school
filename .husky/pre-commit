#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# 1) Room content validator
echo "ğŸ” Validating room content..."
npm run validate-room-content --silent
if [ $? -ne 0 ]; then
  echo "âŒ Room validation failed. Commit blocked."
  exit 1
fi

# 2) Create ZIP for AI
echo "ğŸ“¦ Creating ZIP for AI..."
npm run zip-for-ai
if [ $? -ne 0 ]; then
  echo "âŒ ZIP creation failed. Commit blocked."
  exit 1
fi

# 3) Backup project
echo "ğŸ’¾ Creating project backup..."
npm run backup-project
if [ $? -ne 0 ]; then
  echo "âŒ Backup failed. Commit blocked."
  exit 1
fi

echo "ğŸ‰ Commit passed: validation + ZIP + backup done."
